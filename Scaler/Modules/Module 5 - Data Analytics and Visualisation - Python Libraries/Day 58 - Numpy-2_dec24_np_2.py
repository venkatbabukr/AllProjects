# -*- coding: utf-8 -*-
"""Dec24_NP_2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1WM46HA1GTiWt9DgAcVEXOHjxwlLcDYE9
"""

#Importing the numpy library

import numpy as np

"""```
Help request form if you feel you don't currently have
the desired prerequisites for this DAV-1 module:

https://forms.gle/oK9R8une48TN2M2D7
```
"""

#Create a 2D list; then convert to a 2D array

samp_list = [
              [1,2],
              [3,4],
              [5,6]
                    ]

print(samp_list)

samp_array = np.array(samp_list)

print(samp_array)

print(samp_array.shape)
print(samp_array.size)
print(samp_array.dtype)
print(samp_array.ndim)

#data is sent as multiple packets of bytes

#0 1 0 1 1 0 #stream of numbers

#Imagine the original image in DHaramsala
#Is being recorded in 4x2 pixels


#shape: (4,2) ----> flatten this into a 1D array, new shape: (8,)
original_array = np.array(
    [
        [76,  99],
        [44,  26],
        [81, 104],
        [245, 16]
    ]
)

print(original_array) #convert this into 1D

#numpy function/method called flatten()

new_array = original_array.flatten()

print(new_array)

#flattened array -> reshape it to a 2d array

new_array.reshape((1,8))

#Possible shapes: (1,8), (8,1), (2,4), (4,2)

new_array.reshape((8,1))

new_array.reshape((4,2))

"""#Reshape and Flatten"""

#let's define our custom 1d array and then reshape it

a = np.arange(0, 8, 1) #start (included), stop (excluded), step
print(f"a = {a}")

"""##Reshaping an array"""

b = a.reshape(4,2)
print(f"\n\nb = \n{b}")


c = a.reshape(2,4)
print(f"\n\nc = \n{c}")

d = a.reshape(1,8)
print(f"\n\nd = \n{d}")

e = a.reshape(8,1)
print(f"\n\ne = \n{e}")

"""##Flattening the array"""

print(b)
print()


#There is another function called flatten()
#Which can flatten ANY array into a 1D array

#Flattening an array into 1D



"""#Indexing a 2D array"""







"""#--------------------

#--------------------

#Filters for a 2d array
"""

marks_list = [46, 26, 37, 55, 94, 31, 75]
marks_array = np.array(marks_list)
passing_marks = 33

bool_array = marks_array > 33
print(marks_array[bool_array])

print(marks_array[marks_array > 33])

names = np.array(['Virat', 'Rohit', 'Rahul', 'Dhoni', 'Rishab'])
scores = np.array([34, 73, 41, 99, 97])

#I want to filter those names who scored 50 or more

print(names)
print(scores)
print(scores >= 50)
print(scores[scores >= 50])
print(names[scores >= 50])

#relational operators
array_of_boolean_values = marks_array > passing_marks

array_of_boolean_values

marks_array[array_of_boolean_values]

"""
[46,       26,    37,    55,    94,    31,    75]
[ True, False,  True,  True,  True, False,  True]

"""

marks_array[[True, True,True,True,True,True,True)]]

marks_array[[False, False,True,True,True,True,True]]

marks_array[[False, False,True,True,True,True,True]]

b_list = [
            [80,31],
            [15,95],
            [46,49]
                     ]

b = np.array(b_list)

print(b)

print(b > 33)

print(b[b > 33])

b2 = b.flatten()

b2[b2>33]

"""#Case study: Airbnb NPS

How likely are you to recommend Scaler
to a friend or colleague?

Options: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10


Responses:
Anyone who rates 9 or 10 --> Promoters
Anyone who rates 7 or 8 --> Neutrals / Passives
Anyone who rates 1 to 6 --> Detractors

#NPS score = %_promoters - %_detractors



#Bain & Company -> Consulting
#Customers are not filling feedback


#aggregate NPS score > 50 ---> good outcome
"""

#Download Airbnb's nps "survey" data (.txt format)
!gdown 1c0ClC8SrPwJq5rrkyMKyPn80nyHcFikK

#Load the nps survey data into a numpy array named 'airbnb_nps'
airbnb_nps = np.loadtxt("survey.txt", dtype=int)


print(f"\nTask completed: Survey data loaded into a numpy array named 'airbnb_nps'")

#Let's view the contents of the array

print(airbnb_nps)

#stype, ndim, shape, size of array

print(f"Datatype of airbnb_nps array = {airbnb_nps.dtype}")
print(f"\nNumber of Dimensions in airbnb_nps array = {airbnb_nps.ndim}")
print(f"\nShape of airbnb_nps array = {airbnb_nps.shape}")
print(f"\nSize of airbnb_nps array = {airbnb_nps.size}")

#Identify Promoters, Detractors, Neutrals

promoters = airbnb_nps[airbnb_nps >= 9] #use special numpy filters to generate an array of promoters only

detractors = airbnb_nps[airbnb_nps <= 6] #use special numpy filters to generate an array of detractors only

print(f"Insights from the Airbnb NPS survey data: \n")

print(f"number of promoters = {promoters.size}")
print(f"number of detractors = {detractors.size}")
print(f"number of survey respondents = {airbnb_nps.size} \n")

percentage_promoters = (promoters.size / airbnb_nps.size) * 100
percentage_detractors = (detractors.size / airbnb_nps.size) * 100
print(f"% of promoters = {percentage_promoters : .2f}")
print(f"% of detractors = {percentage_detractors : .2f} \n")

print(f"NPS score from the airbnb survey = {percentage_promoters - percentage_detractors : .2f}")

"""#--------------------

#--------------------

#Slicing, Transposing, and Rotating of Birds image

##### NOTE: The library and functions used to "plot" images are
##### beyond the scope of this session
##### Simply plug in your logic, without worrying about understanding the full code
"""

#download file with "birds" image data
!gdown 1UL59W-QUysWJ_QtJMx0Wdj30g0Qcu8LR


#Importing another library for handling images in Python
import matplotlib.pyplot as plt

#Load the data into a 2d numpy array
birds_img_arr = plt.imread("birds.jpeg")

print(f"\nTask completed: Birds image data loaded into the array 'birds_img_arr'")

#How many rows and columns are there in the birds_img_arr?

print(f"No of dimensions in birds_img_arr = {birds_img_arr.ndim}")
print(f"Shape of birds_img_arr = {birds_img_arr.shape}\n")
print(f"no of rows in birds_img_arr = {birds_img_arr.shape[0]}")
print(f"no of cols in birds_img_arr = {birds_img_arr.shape[1]}") #len of first row
print(f"no of elements in birds_img_arr = {birds_img_arr.shape[0]} * {birds_img_arr.shape[1]} = {birds_img_arr.size}")

#Displaying the data contained in the birds_img_arr

print(birds_img_arr)

#Plotting the birds_img_arr data


plt.title("Plotting the pixel data of birds_img_arr")
plt.imshow(birds_img_arr, cmap='gray')
plt.show()

#Right side bird ONLY

#rows= :
#columns = 400 :


plt.title("Plotting the pixel data of birds_img_arr")
plt.imshow(birds_img_arr[ : , 400: ], cmap='gray')
plt.show()

"""##Slicing of the birds image"""

#Plotting only the TOP HALF rows of birds_img_arr data


plt.title("Plotting top half of birds_img_arr")
plt.imshow(None, cmap='gray')
plt.show()

#Plot ONLY the LEFT HALF of the original birds image

plt.title("Plotting top half of birds_img_arr")
plt.imshow(None, cmap='gray')
plt.show()

"""##Transpose of the birds image"""

#Plotting the original image


plt.title("Plotting original image:")
plt.imshow(birds_img_arr, cmap='gray')
plt.show()


#if you have an array a
#a.T or a.transpose()

#rows BECOME columns
#columns BECOME rows

#Plotting the Transponse of original image


plt.title("Plotting transpose")
plt.imshow(birds_img_arr.T, cmap='gray') #birds_img_arr.transpose()
plt.show()

"""##Rotating the image: combining Transpose and Slice"""

#Rotate original image by 90 degrees clockwise


#HINT: use a mix of transpose and reversing of array


plt.title("Plotting transpose")
plt.imshow(birds_img_arr, cmap='gray') #birds_img_arr.transpose()
plt.show()

plt.title("Plotting transpose")
plt.imshow(birds_img_arr.T[ :,::-1], cmap='gray') #birds_img_arr.transpose()
plt.show()

#Rotate original image by 180 degrees clockwise (or 180 degrees anti-clockwise)

#Rotate original image by 270 degrees clockwise (or 90 degrees anti-clockwise)

"""##Horizontal Mirror image (HMI) rotations"""

#Plotting the horizontal mirror image of the birds photo


plt.title("Horizontal Mirror image")
plt.imshow(birds_img_arr[ ::, ::-1], cmap='gray')
plt.show()

#Rotate HMI by 90 degrees clockwise

#Rotate HMI by 180 degrees clockwise (or 180 degrees anti-clockwise)

#Rotate HMI by 270 degrees clockwise (or 90 degrees anti-clockwise)

"""##Try similar rotations for Vertical Mirror Image (VMI)"""

#Plotting the vertical mirror image of the birds photo


plt.title("Vertical Mirror image")
plt.imshow(birds_img_arr[ ::-1, ::], cmap='gray')
plt.show()





"""#--------------------

#--------------------

#Aggregate Functions
"""

a = np.arange(1,6+1).reshape(3,2)

print(a)
print()
print(a.sum())

"""#--------------------

#--------------------

#In class Quizzes
"""

#Quiz -1

#What will be the output of the following code?


#Indices:     0  1  2  3  4
a = np.array([1, 2, 3, 4, 5])

b = a**2 #in python x**y -> x^y

#b = [1, 4, 9, 16, 25]

print(b[2])

#Quiz 0

#What will be the output of the following code?

a = np.array([1,2,3,4,5]) #a.shape = (5,)

b = np.array([5,5,5,5,5]) #b.shape = (5,)

c = a + b

#c = [ 6, 7, 8, 9, 10]

print(c.shape)

#Quiz 1

#What will be the output of the following code?

a = [1,2,3,4,5]
b = [8,7,6]

#LHS
#a[3:] -> [4, 5]

#RHS
#b[: : -2]: [6, 8]

a = [1,2,3,4,5]

print(a[::]) #all the elements in left to right

print(a[::2])

print(a[::-1]) #all elements in right to left

print(a[::-2])

"""
if a[3:] is 6 and 8;
then why LHS = RHS shows a as [1,2,3]?
"""



#Quiz 2

#What will be the value of a?
a = np.array([0,1,2,3,4,5])
mask = (a%2 == 0) #test for even number

#print(mask): [True, False, True, False, True, False]

#print(a[mask]): [0, 2, 4]. ----> LHS ---> [-1, -1, -1]

a[mask] = -1

#[-1, 1, -1, 3, -1, 5]


print(a)

b = np.array([1,2,3])

b[:] = np.array([10,15,20])

print(b)

start_no = 5
step_size = 3


a1 = 5 + 3*0
a2 = 5 + 3*1
a3 = 5 + 3*2
a4 = 5 + 3*3

a10 = 5 + 3*9


a = []
for i in range(0,9+1):
  a.append(5 + 3*i)

a_arr = np.array(a)

a

